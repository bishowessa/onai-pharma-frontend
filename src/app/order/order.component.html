<div class="booking-container">
  <h1 class="booking-title">Place Your Order</h1>
  <p class="booking-subtitle">Choose your products, fill in the details, and place your order with ease.</p>

  <form [formGroup]="orderForm" class="booking-form" novalidate>
    <div class="form-row">
      <div class="form-group half-width">
        <label for="product">Product</label>
        <select id="product" class="form-control" formControlName="product">
          <option value="" disabled>Select a product</option>
          <option *ngFor="let product of products" [value]="product._id">
            {{ product.name }} - ${{ product.price }}
          </option>
        </select>
        <div *ngIf="orderForm.get('product')?.touched && orderForm.get('product')?.invalid" class="error-message">
          Product is required.
        </div>
      </div>

      <div class="form-group half-width">
        <label for="quantity">Quantity</label>
        <input type="number" id="quantity" class="form-control" formControlName="quantity" min="1" />
        <div *ngIf="orderForm.get('quantity')?.touched && orderForm.get('quantity')?.invalid" class="error-message">
          <div *ngIf="orderForm.get('quantity')?.errors?.['required']">Quantity is required.</div>
          <div *ngIf="orderForm.get('quantity')?.errors?.['min']">Quantity must be at least 1.</div>
        </div>
      </div>
    </div>

    <button type="button" class="btn btn-secondary" (click)="addProductToOrder()">Add to Order</button>

    <div class="form-row">
      <div class="form-group half-width">
        <label for="name">Name</label>
        <input type="text" id="name" class="form-control" formControlName="name" />
        <div *ngIf="orderForm.get('name')?.touched && orderForm.get('name')?.invalid" class="error-message">
          Name is required.
        </div>
      </div>

      <div class="form-group half-width">
        <label for="phone">Phone</label>
        <input type="tel" id="phone" class="form-control" formControlName="phone" />
        <div *ngIf="orderForm.get('phone')?.touched && orderForm.get('phone')?.invalid" class="error-message">
          Phone is required.
        </div>
      </div>
    </div>

    <div class="form-row">
      <div class="form-group half-width">
        <label for="address">Address</label>
        <input type="text" id="address" class="form-control" formControlName="address" />
        <div *ngIf="orderForm.get('address')?.touched && orderForm.get('address')?.invalid" class="error-message">
          Address is required.
        </div>
      </div>

      <div class="form-group half-width">
        <label for="email">Email</label>
        <input type="email" id="email" class="form-control" formControlName="email" />
        <div *ngIf="orderForm.get('email')?.touched && orderForm.get('email')?.invalid" class="error-message">
          <div *ngIf="orderForm.get('email')?.errors?.['required']">Email is required.</div>
          <div *ngIf="orderForm.get('email')?.errors?.['email']">Invalid email format.</div>
        </div>
      </div>
    </div>

    <div class="selected-products" *ngIf="selectedProducts.length > 0">
      <h3>Selected Products</h3>
      <ul>
        <li *ngFor="let product of selectedProducts">
          {{ product.name }} - EGP {{ product.price }} x {{ product.quantity }}
        </li>
      </ul>
    </div>

    <div class="total-price" *ngIf="totalPrice > 0">
      <h3>Total Price: {{ totalPrice }} EGP</h3>
    </div>

    <div *ngIf="successMessage" class="alert alert-success">{{ successMessage }}</div>
    <div *ngIf="failMessage" class="alert alert-danger" [innerHTML]="failMessage"></div>

    <button type="button" class="booking-btn" (click)="submitOrder()">Place Order</button>
  </form>
</div>
